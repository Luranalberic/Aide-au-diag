<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Détails du résultat</title>
    <link rel="icon" href="favicon.svg">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Détails du résultat</h1>
    <div id="result-details"></div>

    <script>
        // Récupérer l'index de la ligne à partir de l'URL
        const params = new URLSearchParams(window.location.search);
        const resultIndex = params.get('index');
        const API_KEY = 'AIzaSyCf4B0VxrrvRgkRS7JECLU9BJv3LxyCbDc'; // Remplace par ta clé API
        const SPREADSHEET_ID = '1XmDnub3MfsAVfVlIAqrRKB1yBVEEx3iluG-Qsxq5Eds'; // L'ID de ta feuille Google Sheets
        const RANGE = 'bdd!A3:AN201'; // La plage de ta feuille Google Sheets
        const URL = `https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/${RANGE}?key=${API_KEY}`;

        let allData = [];

        // Fonction pour récupérer les données via l'API Google Sheets
        async function fetchData() {
            try {
                const response = await fetch(URL);
                const data = await response.json();

                // Vérifier que les données existent et les stocker dans allData
                if (data && data.values) {
                    allData = data.values;
                    console.log('Données récupérées :', allData);

                    // Appeler la fonction d'affichage des résultats après avoir chargé les données
                    displayResults(allData); 
                } else {
                    console.error('Aucune donnée trouvée.');
                }
            } catch (error) {
                console.error('Erreur lors du chargement des données :', error);
            }
        }

        // Appeler fetchData pour récupérer et afficher les données
        fetchData();

        if (resultIndex !== null && allData[resultIndex]) {
            const row = allData[resultIndex];
            document.getElementById('result-details').innerHTML = `
                <p><strong>Nom :</strong> ${row[0]}</p>
                <p><strong>Nom latin :</strong> ${row[1]} ${row[2]}</p>
                <p><strong>Synonymes :</strong> ${row[3] || 'Aucun'}</p>
                <p><strong>Famille :</strong> ${row[37]}</p>
                <!-- Ajoutez d'autres informations ici -->
            `;
        } else {
            document.getElementById('result-details').textContent = 'Aucun résultat trouvé';
        }
    </script>
</body>
</html>
